(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(14),a=n.n(r),u=n(3),o=n(4),i=n.n(o),s="/api/persons",l={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},remove:function(e){i.a.delete("".concat(s,"/").concat(e))},update:function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))}},d=n(0),b=function(e){var t=e.person,n=e.click;return Object(d.jsxs)("div",{children:[t.name," ",t.number," ",Object(d.jsx)("button",{onClick:n,children:"delete"})]})},j=function(e){var t=e.persons.filter((function(t){return t.name.toLowerCase().includes(e.filter)}));return t.map((function(n){return Object(d.jsx)(b,{person:n,click:function(){return function(n){window.confirm("Are you sure to delete ".concat(n.name,"?"))&&(l.remove(n.id),e.setPersons(t.filter((function(e){return e.id!==n.id}))))}(n)}},n.name)}))},f=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{children:[e.text,Object(d.jsx)("input",{value:e.value,onChange:e.onChange})]})})},h=function(e){return Object(d.jsxs)("form",{onSubmit:e.submit,children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:["name:"," ",Object(d.jsx)("input",{value:e.state.newName,onChange:e.state.handleNameChange})]}),Object(d.jsxs)("div",{children:["number:"," ",Object(d.jsx)("input",{value:e.state.newNumber,onChange:e.state.handleNumberChange})]})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.message,n=e.status;return"success"===n?Object(d.jsx)("div",{className:"notification",children:t}):"error"===n?Object(d.jsx)("div",{className:"error",children:t}):null},O=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),i=o[0],s=o[1],b=Object(c.useState)(""),O=Object(u.a)(b,2),v=O[0],x=O[1],p=Object(c.useState)(""),g=Object(u.a)(p,2),w=g[0],C=g[1],N=Object(c.useState)(null),k=Object(u.a)(N,2),S=k[0],y=k[1],A=Object(c.useState)(null),P=Object(u.a)(A,2),T=P[0],E=P[1];Object(c.useEffect)((function(){l.getAll().then((function(e){r(e)}))}),[]);var J={newName:i,handleNameChange:function(e){s(e.target.value)},newNumber:v,handleNumberChange:function(e){x(e.target.value)}};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(m,{message:S,status:T}),Object(d.jsx)(f,{value:w,onChange:function(e){C(e.target.value)},text:"filter name by: "}),Object(d.jsx)("h2",{children:"Add a new contact"}),Object(d.jsx)(h,{submit:function(e){e.preventDefault();var t=null;if(n.some((function(e){return e.name===i}))){if(!window.confirm("".concat(i," has already been added to the phonebook, replace the old number with the new one?")))return;t=n.filter((function(e){return e.name===i}))}var c={name:i,number:v};t&&l.update(t[0].id,c).then((function(e){r(n.map((function(t){return t.id!==e.id?t:e}))),E("success"),y("Number changed for ".concat(e.name)),setTimeout((function(){E(null),y(null)}),3500)})).catch((function(e){E("error"),y("Contact ".concat(t[0].name," has already been removed from the server.")),setTimeout((function(){E(null),y(null)}),5e3),r(n.filter((function(e){return e.id!==t[0].id})))})),t||l.create(c).then((function(e){r(n.concat(e)),E("success"),y("Added ".concat(e.name)),setTimeout((function(){E(null),y(null)}),3500)})),s(""),x("")},state:J}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{persons:n,filter:w,setPersons:r})]})};n(38);a.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d972a66a.chunk.js.map